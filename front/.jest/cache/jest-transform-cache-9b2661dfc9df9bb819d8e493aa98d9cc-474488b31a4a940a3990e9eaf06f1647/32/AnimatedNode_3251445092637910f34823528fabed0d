5d64698014d7094f4098ca274612555d
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var NativeAnimatedHelper = require("../NativeAnimatedHelper");
var NativeAnimatedAPI = NativeAnimatedHelper.API;
var invariant = require('invariant');
var _uniqueId = 1;
var AnimatedNode = function () {
  function AnimatedNode() {
    (0, _classCallCheck2.default)(this, AnimatedNode);
    this._listeners = {};
  }
  (0, _createClass2.default)(AnimatedNode, [{
    key: "__attach",
    value: function __attach() {}
  }, {
    key: "__detach",
    value: function __detach() {
      if (this.__isNative && this.__nativeTag != null) {
        NativeAnimatedHelper.API.dropAnimatedNode(this.__nativeTag);
        this.__nativeTag = undefined;
      }
    }
  }, {
    key: "__getValue",
    value: function __getValue() {}
  }, {
    key: "__getAnimatedValue",
    value: function __getAnimatedValue() {
      return this.__getValue();
    }
  }, {
    key: "__addChild",
    value: function __addChild(child) {}
  }, {
    key: "__removeChild",
    value: function __removeChild(child) {}
  }, {
    key: "__getChildren",
    value: function __getChildren() {
      return [];
    }
  }, {
    key: "__makeNative",
    value: function __makeNative(platformConfig) {
      if (!this.__isNative) {
        throw new Error('This node cannot be made a "native" animated node');
      }
      this._platformConfig = platformConfig;
      if (this.hasListeners()) {
        this._startListeningToNativeValueUpdates();
      }
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var id = String(_uniqueId++);
      this._listeners[id] = callback;
      if (this.__isNative) {
        this._startListeningToNativeValueUpdates();
      }
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      delete this._listeners[id];
      if (this.__isNative && !this.hasListeners()) {
        this._stopListeningForNativeValueUpdates();
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners() {
      this._listeners = {};
      if (this.__isNative) {
        this._stopListeningForNativeValueUpdates();
      }
    }
  }, {
    key: "hasListeners",
    value: function hasListeners() {
      return !!Object.keys(this._listeners).length;
    }
  }, {
    key: "_startListeningToNativeValueUpdates",
    value: function _startListeningToNativeValueUpdates() {
      var _this = this;
      if (this.__nativeAnimatedValueListener && !this.__shouldUpdateListenersForNewNativeTag) {
        return;
      }
      if (this.__shouldUpdateListenersForNewNativeTag) {
        this.__shouldUpdateListenersForNewNativeTag = false;
        this._stopListeningForNativeValueUpdates();
      }
      NativeAnimatedAPI.startListeningToAnimatedNodeValue(this.__getNativeTag());
      this.__nativeAnimatedValueListener = NativeAnimatedHelper.nativeEventEmitter.addListener('onAnimatedValueUpdate', function (data) {
        if (data.tag !== _this.__getNativeTag()) {
          return;
        }
        _this.__onAnimatedValueUpdateReceived(data.value);
      });
    }
  }, {
    key: "__onAnimatedValueUpdateReceived",
    value: function __onAnimatedValueUpdateReceived(value) {
      this.__callListeners(value);
    }
  }, {
    key: "__callListeners",
    value: function __callListeners(value) {
      for (var _key in this._listeners) {
        this._listeners[_key]({
          value: value
        });
      }
    }
  }, {
    key: "_stopListeningForNativeValueUpdates",
    value: function _stopListeningForNativeValueUpdates() {
      if (!this.__nativeAnimatedValueListener) {
        return;
      }
      this.__nativeAnimatedValueListener.remove();
      this.__nativeAnimatedValueListener = null;
      NativeAnimatedAPI.stopListeningToAnimatedNodeValue(this.__getNativeTag());
    }
  }, {
    key: "__getNativeTag",
    value: function __getNativeTag() {
      var _this$__nativeTag;
      NativeAnimatedHelper.assertNativeAnimatedModule();
      invariant(this.__isNative, 'Attempt to get native tag from node not marked as "native"');
      var nativeTag = (_this$__nativeTag = this.__nativeTag) != null ? _this$__nativeTag : NativeAnimatedHelper.generateNewNodeTag();
      if (this.__nativeTag == null) {
        this.__nativeTag = nativeTag;
        var config = this.__getNativeConfig();
        if (this._platformConfig) {
          config.platformConfig = this._platformConfig;
        }
        NativeAnimatedHelper.API.createAnimatedNode(nativeTag, config);
        this.__shouldUpdateListenersForNewNativeTag = true;
      }
      return nativeTag;
    }
  }, {
    key: "__getNativeConfig",
    value: function __getNativeConfig() {
      throw new Error('This JS animated node type cannot be used as native animated node');
    }
  }, {
    key: "toJSON",
    value: function toJSON() {
      return this.__getValue();
    }
  }, {
    key: "__getPlatformConfig",
    value: function __getPlatformConfig() {
      return this._platformConfig;
    }
  }, {
    key: "__setPlatformConfig",
    value: function __setPlatformConfig(platformConfig) {
      this._platformConfig = platformConfig;
    }
  }]);
  return AnimatedNode;
}();
module.exports = AnimatedNode;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJOYXRpdmVBbmltYXRlZEFQSSIsIkFQSSIsImludmFyaWFudCIsIl91bmlxdWVJZCIsIkFuaW1hdGVkTm9kZSIsImRlZmF1bHQiLCJfbGlzdGVuZXJzIiwia2V5IiwidmFsdWUiLCJfX2F0dGFjaCIsIl9fZGV0YWNoIiwiX19pc05hdGl2ZSIsIl9fbmF0aXZlVGFnIiwiZHJvcEFuaW1hdGVkTm9kZSIsInVuZGVmaW5lZCIsIl9fZ2V0VmFsdWUiLCJfX2dldEFuaW1hdGVkVmFsdWUiLCJfX2FkZENoaWxkIiwiY2hpbGQiLCJfX3JlbW92ZUNoaWxkIiwiX19nZXRDaGlsZHJlbiIsIl9fbWFrZU5hdGl2ZSIsInBsYXRmb3JtQ29uZmlnIiwiRXJyb3IiLCJfcGxhdGZvcm1Db25maWciLCJoYXNMaXN0ZW5lcnMiLCJfc3RhcnRMaXN0ZW5pbmdUb05hdGl2ZVZhbHVlVXBkYXRlcyIsImFkZExpc3RlbmVyIiwiY2FsbGJhY2siLCJpZCIsIlN0cmluZyIsInJlbW92ZUxpc3RlbmVyIiwiX3N0b3BMaXN0ZW5pbmdGb3JOYXRpdmVWYWx1ZVVwZGF0ZXMiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiX3RoaXMiLCJfX25hdGl2ZUFuaW1hdGVkVmFsdWVMaXN0ZW5lciIsIl9fc2hvdWxkVXBkYXRlTGlzdGVuZXJzRm9yTmV3TmF0aXZlVGFnIiwic3RhcnRMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiX19nZXROYXRpdmVUYWciLCJuYXRpdmVFdmVudEVtaXR0ZXIiLCJkYXRhIiwidGFnIiwiX19vbkFuaW1hdGVkVmFsdWVVcGRhdGVSZWNlaXZlZCIsIl9fY2FsbExpc3RlbmVycyIsInJlbW92ZSIsInN0b3BMaXN0ZW5pbmdUb0FuaW1hdGVkTm9kZVZhbHVlIiwiX3RoaXMkX19uYXRpdmVUYWciLCJhc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSIsIm5hdGl2ZVRhZyIsImdlbmVyYXRlTmV3Tm9kZVRhZyIsImNvbmZpZyIsIl9fZ2V0TmF0aXZlQ29uZmlnIiwiY3JlYXRlQW5pbWF0ZWROb2RlIiwidG9KU09OIiwiX19nZXRQbGF0Zm9ybUNvbmZpZyIsIl9fc2V0UGxhdGZvcm1Db25maWciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQW5pbWF0ZWROb2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgTmF0aXZlQW5pbWF0ZWRIZWxwZXIgPSByZXF1aXJlKCcuLi9OYXRpdmVBbmltYXRlZEhlbHBlcicpO1xuXG5jb25zdCBOYXRpdmVBbmltYXRlZEFQSSA9IE5hdGl2ZUFuaW1hdGVkSGVscGVyLkFQSTtcbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG5pbXBvcnQgdHlwZSB7UGxhdGZvcm1Db25maWd9IGZyb20gJy4uL0FuaW1hdGVkUGxhdGZvcm1Db25maWcnO1xuXG50eXBlIFZhbHVlTGlzdGVuZXJDYWxsYmFjayA9IChzdGF0ZToge3ZhbHVlOiBudW1iZXIsIC4uLn0pID0+IG1peGVkO1xuXG5sZXQgX3VuaXF1ZUlkID0gMTtcblxuLy8gTm90ZSh2amV1eCk6IHRoaXMgd291bGQgYmUgYmV0dGVyIGFzIGFuIGludGVyZmFjZSBidXQgZmxvdyBkb2Vzbid0XG4vLyBzdXBwb3J0IHRoZW0geWV0XG5jbGFzcyBBbmltYXRlZE5vZGUge1xuICBfbGlzdGVuZXJzOiB7W2tleTogc3RyaW5nXTogVmFsdWVMaXN0ZW5lckNhbGxiYWNrLCAuLi59O1xuICBfcGxhdGZvcm1Db25maWc6ID9QbGF0Zm9ybUNvbmZpZztcbiAgX19uYXRpdmVBbmltYXRlZFZhbHVlTGlzdGVuZXI6ID9hbnk7XG4gIF9fYXR0YWNoKCk6IHZvaWQge31cbiAgX19kZXRhY2goKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSAmJiB0aGlzLl9fbmF0aXZlVGFnICE9IG51bGwpIHtcbiAgICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLkFQSS5kcm9wQW5pbWF0ZWROb2RlKHRoaXMuX19uYXRpdmVUYWcpO1xuICAgICAgdGhpcy5fX25hdGl2ZVRhZyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgX19nZXRWYWx1ZSgpOiBhbnkge31cbiAgX19nZXRBbmltYXRlZFZhbHVlKCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRWYWx1ZSgpO1xuICB9XG4gIF9fYWRkQ2hpbGQoY2hpbGQ6IEFuaW1hdGVkTm9kZSkge31cbiAgX19yZW1vdmVDaGlsZChjaGlsZDogQW5pbWF0ZWROb2RlKSB7fVxuICBfX2dldENoaWxkcmVuKCk6IEFycmF5PEFuaW1hdGVkTm9kZT4ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIC8qIE1ldGhvZHMgYW5kIHByb3BzIHVzZWQgYnkgbmF0aXZlIEFuaW1hdGVkIGltcGwgKi9cbiAgX19pc05hdGl2ZTogYm9vbGVhbjtcbiAgX19uYXRpdmVUYWc6ID9udW1iZXI7XG4gIF9fc2hvdWxkVXBkYXRlTGlzdGVuZXJzRm9yTmV3TmF0aXZlVGFnOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuICB9XG5cbiAgX19tYWtlTmF0aXZlKHBsYXRmb3JtQ29uZmlnOiA/UGxhdGZvcm1Db25maWcpIHtcbiAgICBpZiAoIXRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIG5vZGUgY2Fubm90IGJlIG1hZGUgYSBcIm5hdGl2ZVwiIGFuaW1hdGVkIG5vZGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wbGF0Zm9ybUNvbmZpZyA9IHBsYXRmb3JtQ29uZmlnO1xuICAgIGlmICh0aGlzLmhhc0xpc3RlbmVycygpKSB7XG4gICAgICB0aGlzLl9zdGFydExpc3RlbmluZ1RvTmF0aXZlVmFsdWVVcGRhdGVzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gYXN5bmNocm9ub3VzIGxpc3RlbmVyIHRvIHRoZSB2YWx1ZSBzbyB5b3UgY2FuIG9ic2VydmUgdXBkYXRlcyBmcm9tXG4gICAqIGFuaW1hdGlvbnMuICBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIHRoZXJlIGlzIG5vIHdheSB0b1xuICAgKiBzeW5jaHJvbm91c2x5IHJlYWQgdGhlIHZhbHVlIGJlY2F1c2UgaXQgbWlnaHQgYmUgZHJpdmVuIG5hdGl2ZWx5LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hbmltYXRlZHZhbHVlI2FkZGxpc3RlbmVyXG4gICAqL1xuICBhZGRMaXN0ZW5lcihjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IG1peGVkKTogc3RyaW5nIHtcbiAgICBjb25zdCBpZCA9IFN0cmluZyhfdW5pcXVlSWQrKyk7XG4gICAgdGhpcy5fbGlzdGVuZXJzW2lkXSA9IGNhbGxiYWNrO1xuICAgIGlmICh0aGlzLl9faXNOYXRpdmUpIHtcbiAgICAgIHRoaXMuX3N0YXJ0TGlzdGVuaW5nVG9OYXRpdmVWYWx1ZVVwZGF0ZXMoKTtcbiAgICB9XG4gICAgcmV0dXJuIGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYSBsaXN0ZW5lci4gVGhlIGBpZGAgcGFyYW0gc2hhbGwgbWF0Y2ggdGhlIGlkZW50aWZpZXJcbiAgICogcHJldmlvdXNseSByZXR1cm5lZCBieSBgYWRkTGlzdGVuZXIoKWAuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkdmFsdWUjcmVtb3ZlbGlzdGVuZXJcbiAgICovXG4gIHJlbW92ZUxpc3RlbmVyKGlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJzW2lkXTtcbiAgICBpZiAodGhpcy5fX2lzTmF0aXZlICYmICF0aGlzLmhhc0xpc3RlbmVycygpKSB7XG4gICAgICB0aGlzLl9zdG9wTGlzdGVuaW5nRm9yTmF0aXZlVmFsdWVVcGRhdGVzKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FuaW1hdGVkdmFsdWUjcmVtb3ZlYWxsbGlzdGVuZXJzXG4gICAqL1xuICByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gICAgaWYgKHRoaXMuX19pc05hdGl2ZSkge1xuICAgICAgdGhpcy5fc3RvcExpc3RlbmluZ0Zvck5hdGl2ZVZhbHVlVXBkYXRlcygpO1xuICAgIH1cbiAgfVxuXG4gIGhhc0xpc3RlbmVycygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFPYmplY3Qua2V5cyh0aGlzLl9saXN0ZW5lcnMpLmxlbmd0aDtcbiAgfVxuXG4gIF9zdGFydExpc3RlbmluZ1RvTmF0aXZlVmFsdWVVcGRhdGVzKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuX19uYXRpdmVBbmltYXRlZFZhbHVlTGlzdGVuZXIgJiZcbiAgICAgICF0aGlzLl9fc2hvdWxkVXBkYXRlTGlzdGVuZXJzRm9yTmV3TmF0aXZlVGFnXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX19zaG91bGRVcGRhdGVMaXN0ZW5lcnNGb3JOZXdOYXRpdmVUYWcpIHtcbiAgICAgIHRoaXMuX19zaG91bGRVcGRhdGVMaXN0ZW5lcnNGb3JOZXdOYXRpdmVUYWcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3N0b3BMaXN0ZW5pbmdGb3JOYXRpdmVWYWx1ZVVwZGF0ZXMoKTtcbiAgICB9XG5cbiAgICBOYXRpdmVBbmltYXRlZEFQSS5zdGFydExpc3RlbmluZ1RvQW5pbWF0ZWROb2RlVmFsdWUodGhpcy5fX2dldE5hdGl2ZVRhZygpKTtcbiAgICB0aGlzLl9fbmF0aXZlQW5pbWF0ZWRWYWx1ZUxpc3RlbmVyID1cbiAgICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLm5hdGl2ZUV2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcihcbiAgICAgICAgJ29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZScsXG4gICAgICAgIGRhdGEgPT4ge1xuICAgICAgICAgIGlmIChkYXRhLnRhZyAhPT0gdGhpcy5fX2dldE5hdGl2ZVRhZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuX19vbkFuaW1hdGVkVmFsdWVVcGRhdGVSZWNlaXZlZChkYXRhLnZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICk7XG4gIH1cblxuICBfX29uQW5pbWF0ZWRWYWx1ZVVwZGF0ZVJlY2VpdmVkKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLl9fY2FsbExpc3RlbmVycyh2YWx1ZSk7XG4gIH1cblxuICBfX2NhbGxMaXN0ZW5lcnModmFsdWU6IG51bWJlcik6IHZvaWQge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX2xpc3RlbmVycykge1xuICAgICAgdGhpcy5fbGlzdGVuZXJzW2tleV0oe3ZhbHVlfSk7XG4gICAgfVxuICB9XG5cbiAgX3N0b3BMaXN0ZW5pbmdGb3JOYXRpdmVWYWx1ZVVwZGF0ZXMoKSB7XG4gICAgaWYgKCF0aGlzLl9fbmF0aXZlQW5pbWF0ZWRWYWx1ZUxpc3RlbmVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fX25hdGl2ZUFuaW1hdGVkVmFsdWVMaXN0ZW5lci5yZW1vdmUoKTtcbiAgICB0aGlzLl9fbmF0aXZlQW5pbWF0ZWRWYWx1ZUxpc3RlbmVyID0gbnVsbDtcbiAgICBOYXRpdmVBbmltYXRlZEFQSS5zdG9wTGlzdGVuaW5nVG9BbmltYXRlZE5vZGVWYWx1ZSh0aGlzLl9fZ2V0TmF0aXZlVGFnKCkpO1xuICB9XG5cbiAgX19nZXROYXRpdmVUYWcoKTogbnVtYmVyIHtcbiAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5hc3NlcnROYXRpdmVBbmltYXRlZE1vZHVsZSgpO1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMuX19pc05hdGl2ZSxcbiAgICAgICdBdHRlbXB0IHRvIGdldCBuYXRpdmUgdGFnIGZyb20gbm9kZSBub3QgbWFya2VkIGFzIFwibmF0aXZlXCInLFxuICAgICk7XG5cbiAgICBjb25zdCBuYXRpdmVUYWcgPVxuICAgICAgdGhpcy5fX25hdGl2ZVRhZyA/PyBOYXRpdmVBbmltYXRlZEhlbHBlci5nZW5lcmF0ZU5ld05vZGVUYWcoKTtcblxuICAgIGlmICh0aGlzLl9fbmF0aXZlVGFnID09IG51bGwpIHtcbiAgICAgIHRoaXMuX19uYXRpdmVUYWcgPSBuYXRpdmVUYWc7XG4gICAgICBjb25zdCBjb25maWcgPSB0aGlzLl9fZ2V0TmF0aXZlQ29uZmlnKCk7XG4gICAgICBpZiAodGhpcy5fcGxhdGZvcm1Db25maWcpIHtcbiAgICAgICAgY29uZmlnLnBsYXRmb3JtQ29uZmlnID0gdGhpcy5fcGxhdGZvcm1Db25maWc7XG4gICAgICB9XG4gICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5BUEkuY3JlYXRlQW5pbWF0ZWROb2RlKG5hdGl2ZVRhZywgY29uZmlnKTtcbiAgICAgIHRoaXMuX19zaG91bGRVcGRhdGVMaXN0ZW5lcnNGb3JOZXdOYXRpdmVUYWcgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVUYWc7XG4gIH1cbiAgX19nZXROYXRpdmVDb25maWcoKTogT2JqZWN0IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnVGhpcyBKUyBhbmltYXRlZCBub2RlIHR5cGUgY2Fubm90IGJlIHVzZWQgYXMgbmF0aXZlIGFuaW1hdGVkIG5vZGUnLFxuICAgICk7XG4gIH1cbiAgdG9KU09OKCk6IGFueSB7XG4gICAgcmV0dXJuIHRoaXMuX19nZXRWYWx1ZSgpO1xuICB9XG5cbiAgX19nZXRQbGF0Zm9ybUNvbmZpZygpOiA/UGxhdGZvcm1Db25maWcge1xuICAgIHJldHVybiB0aGlzLl9wbGF0Zm9ybUNvbmZpZztcbiAgfVxuICBfX3NldFBsYXRmb3JtQ29uZmlnKHBsYXRmb3JtQ29uZmlnOiA/UGxhdGZvcm1Db25maWcpIHtcbiAgICB0aGlzLl9wbGF0Zm9ybUNvbmZpZyA9IHBsYXRmb3JtQ29uZmlnO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQW5pbWF0ZWROb2RlO1xuIl0sIm1hcHBpbmdzIjoiQUFVQSxZQUFZOztBQUFDLElBQUFBLHNCQUFBLEdBQUFDLE9BQUE7QUFBQSxJQUFBQyxnQkFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsSUFBQUUsYUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBRWIsSUFBTUcsb0JBQW9CLEdBQUdILE9BQU8sMkJBQTJCO0FBRS9ELElBQU1JLGlCQUFpQixHQUFHRCxvQkFBb0IsQ0FBQ0UsR0FBRztBQUNsRCxJQUFNQyxTQUFTLEdBQUdOLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFNdEMsSUFBSU8sU0FBUyxHQUFHLENBQUM7QUFBQyxJQUlaQyxZQUFZO0VBMEJoQixTQUFBQSxhQUFBLEVBQWM7SUFBQSxJQUFBUCxnQkFBQSxDQUFBUSxPQUFBLFFBQUFELFlBQUE7SUFDWixJQUFJLENBQUNFLFVBQVUsR0FBRyxDQUFDLENBQUM7RUFDdEI7RUFBQyxJQUFBUixhQUFBLENBQUFPLE9BQUEsRUFBQUQsWUFBQTtJQUFBRyxHQUFBO0lBQUFDLEtBQUEsRUF4QkQsU0FBQUMsU0FBQSxFQUFpQixDQUFDO0VBQUM7SUFBQUYsR0FBQTtJQUFBQyxLQUFBLEVBQ25CLFNBQUFFLFNBQUEs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