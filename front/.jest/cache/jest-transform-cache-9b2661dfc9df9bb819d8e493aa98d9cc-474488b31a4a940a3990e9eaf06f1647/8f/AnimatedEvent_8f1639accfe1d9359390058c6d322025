50b7b90db9f9f613bffea2bb04413a67
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var AnimatedValue = require("./nodes/AnimatedValue");
var AnimatedValueXY = require("./nodes/AnimatedValueXY");
var NativeAnimatedHelper = require("./NativeAnimatedHelper");
var ReactNative = require("../Renderer/shims/ReactNative");
var invariant = require('invariant');
var _require = require("./NativeAnimatedHelper"),
  shouldUseNativeDriver = _require.shouldUseNativeDriver;
function attachNativeEvent(viewRef, eventName, argMapping, platformConfig) {
  var eventMappings = [];
  var traverse = function traverse(value, path) {
    if (value instanceof AnimatedValue) {
      value.__makeNative(platformConfig);
      eventMappings.push({
        nativeEventPath: path,
        animatedValueTag: value.__getNativeTag()
      });
    } else if (value instanceof AnimatedValueXY) {
      traverse(value.x, path.concat('x'));
      traverse(value.y, path.concat('y'));
    } else if (typeof value === 'object') {
      for (var _key in value) {
        traverse(value[_key], path.concat(_key));
      }
    }
  };
  invariant(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.');
  traverse(argMapping[0].nativeEvent, []);
  var viewTag = ReactNative.findNodeHandle(viewRef);
  if (viewTag != null) {
    eventMappings.forEach(function (mapping) {
      NativeAnimatedHelper.API.addAnimatedEventToView(viewTag, eventName, mapping);
    });
  }
  return {
    detach: function detach() {
      if (viewTag != null) {
        eventMappings.forEach(function (mapping) {
          NativeAnimatedHelper.API.removeAnimatedEventFromView(viewTag, eventName, mapping.animatedValueTag);
        });
      }
    }
  };
}
function validateMapping(argMapping, args) {
  var validate = function validate(recMapping, recEvt, key) {
    if (recMapping instanceof AnimatedValue) {
      invariant(typeof recEvt === 'number', 'Bad mapping of event key ' + key + ', should be number but got ' + typeof recEvt);
      return;
    }
    if (recMapping instanceof AnimatedValueXY) {
      invariant(typeof recEvt.x === 'number' && typeof recEvt.y === 'number', 'Bad mapping of event key ' + key + ', should be XY but got ' + recEvt);
      return;
    }
    if (typeof recEvt === 'number') {
      invariant(recMapping instanceof AnimatedValue, 'Bad mapping of type ' + typeof recMapping + ' for key ' + key + ', event value must map to AnimatedValue');
      return;
    }
    invariant(typeof recMapping === 'object', 'Bad mapping of type ' + typeof recMapping + ' for key ' + key);
    invariant(typeof recEvt === 'object', 'Bad event of type ' + typeof recEvt + ' for key ' + key);
    for (var mappingKey in recMapping) {
      validate(recMapping[mappingKey], recEvt[mappingKey], mappingKey);
    }
  };
  invariant(args.length >= argMapping.length, 'Event has less arguments than mapping');
  argMapping.forEach(function (mapping, idx) {
    validate(mapping, args[idx], 'arg' + idx);
  });
}
var AnimatedEvent = function () {
  function AnimatedEvent(argMapping, config) {
    var _this = this;
    (0, _classCallCheck2.default)(this, AnimatedEvent);
    this._listeners = [];
    this._callListeners = function () {
      for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {
        args[_key2] = arguments[_key2];
      }
      _this._listeners.forEach(function (listener) {
        return listener.apply(void 0, args);
      });
    };
    this._argMapping = argMapping;
    if (config == null) {
      console.warn('Animated.event now requires a second argument for options');
      config = {
        useNativeDriver: false
      };
    }
    if (config.listener) {
      this.__addListener(config.listener);
    }
    this._attachedEvent = null;
    this.__isNative = shouldUseNativeDriver(config);
    this.__platformConfig = config.platformConfig;
  }
  (0, _createClass2.default)(AnimatedEvent, [{
    key: "__addListener",
    value: function __addListener(callback) {
      this._listeners.push(callback);
    }
  }, {
    key: "__removeListener",
    value: function __removeListener(callback) {
      this._listeners = this._listeners.filter(function (listener) {
        return listener !== callback;
      });
    }
  }, {
    key: "__attach",
    value: function __attach(viewRef, eventName) {
      invariant(this.__isNative, 'Only native driven events need to be attached.');
      this._attachedEvent = attachNativeEvent(viewRef, eventName, this._argMapping, this.__platformConfig);
    }
  }, {
    key: "__detach",
    value: function __detach(viewTag, eventName) {
      invariant(this.__isNative, 'Only native driven events need to be detached.');
      this._attachedEvent && this._attachedEvent.detach();
    }
  }, {
    key: "__getHandler",
    value: function __getHandler() {
      var _this2 = this;
      if (this.__isNative) {
        if (__DEV__) {
          var _validatedMapping = false;
          return function () {
            for (var _len2 = arguments.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {
              args[_key3] = arguments[_key3];
            }
            if (!_validatedMapping) {
              validateMapping(_this2._argMapping, args);
              _validatedMapping = true;
            }
            _this2._callListeners.apply(_this2, args);
          };
        } else {
          return this._callListeners;
        }
      }
      var validatedMapping = false;
      return function () {
        for (var _len3 = arguments.length, args = new Array(_len3), _key4 = 0; _key4 < _len3; _key4++) {
          args[_key4] = arguments[_key4];
        }
        if (__DEV__ && !validatedMapping) {
          validateMapping(_this2._argMapping, args);
          validatedMapping = true;
        }
        var traverse = function traverse(recMapping, recEvt) {
          if (recMapping instanceof AnimatedValue) {
            if (typeof recEvt === 'number') {
              recMapping.setValue(recEvt);
            }
          } else if (recMapping instanceof AnimatedValueXY) {
            if (typeof recEvt === 'object') {
              traverse(recMapping.x, recEvt.x);
              traverse(recMapping.y, recEvt.y);
            }
          } else if (typeof recMapping === 'object') {
            for (var mappingKey in recMapping) {
              traverse(recMapping[mappingKey], recEvt[mappingKey]);
            }
          }
        };
        _this2._argMapping.forEach(function (mapping, idx) {
          traverse(mapping, args[idx]);
        });
        _this2._callListeners.apply(_this2, args);
      };
    }
  }]);
  return AnimatedEvent;
}();
module.exports = {
  AnimatedEvent: AnimatedEvent,
  attachNativeEvent: attachNativeEvent
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiQW5pbWF0ZWRWYWx1ZSIsIkFuaW1hdGVkVmFsdWVYWSIsIk5hdGl2ZUFuaW1hdGVkSGVscGVyIiwiUmVhY3ROYXRpdmUiLCJpbnZhcmlhbnQiLCJfcmVxdWlyZSIsInNob3VsZFVzZU5hdGl2ZURyaXZlciIsImF0dGFjaE5hdGl2ZUV2ZW50Iiwidmlld1JlZiIsImV2ZW50TmFtZSIsImFyZ01hcHBpbmciLCJwbGF0Zm9ybUNvbmZpZyIsImV2ZW50TWFwcGluZ3MiLCJ0cmF2ZXJzZSIsInZhbHVlIiwicGF0aCIsIl9fbWFrZU5hdGl2ZSIsInB1c2giLCJuYXRpdmVFdmVudFBhdGgiLCJhbmltYXRlZFZhbHVlVGFnIiwiX19nZXROYXRpdmVUYWciLCJ4IiwiY29uY2F0IiwieSIsImtleSIsIm5hdGl2ZUV2ZW50Iiwidmlld1RhZyIsImZpbmROb2RlSGFuZGxlIiwiZm9yRWFjaCIsIm1hcHBpbmciLCJBUEkiLCJhZGRBbmltYXRlZEV2ZW50VG9WaWV3IiwiZGV0YWNoIiwicmVtb3ZlQW5pbWF0ZWRFdmVudEZyb21WaWV3IiwidmFsaWRhdGVNYXBwaW5nIiwiYXJncyIsInZhbGlkYXRlIiwicmVjTWFwcGluZyIsInJlY0V2dCIsIm1hcHBpbmdLZXkiLCJsZW5ndGgiLCJpZHgiLCJBbmltYXRlZEV2ZW50IiwiY29uZmlnIiwiX3RoaXMiLCJkZWZhdWx0IiwiX2xpc3RlbmVycyIsIl9jYWxsTGlzdGVuZXJzIiwiX2xlbiIsImFyZ3VtZW50cyIsIkFycmF5IiwiX2tleTIiLCJsaXN0ZW5lciIsImFwcGx5IiwiX2FyZ01hcHBpbmciLCJjb25zb2xlIiwid2FybiIsInVzZU5hdGl2ZURyaXZlciIsIl9fYWRkTGlzdGVuZXIiLCJfYXR0YWNoZWRFdmVudCIsIl9faXNOYXRpdmUiLCJfX3BsYXRmb3JtQ29uZmlnIiwiY2FsbGJhY2siLCJfX3JlbW92ZUxpc3RlbmVyIiwiZmlsdGVyIiwiX19hdHRhY2giLCJfX2RldGFjaCIsIl9fZ2V0SGFuZGxlciIsIl90aGlzMiIsIl9fREVWX18iLCJ2YWxpZGF0ZWRNYXBwaW5nIiwiX2xlbjIiLCJfa2V5MyIsIl9sZW4zIiwiX2tleTQiLCJzZXRWYWx1ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJBbmltYXRlZEV2ZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgQW5pbWF0ZWRWYWx1ZSA9IHJlcXVpcmUoJy4vbm9kZXMvQW5pbWF0ZWRWYWx1ZScpO1xuY29uc3QgQW5pbWF0ZWRWYWx1ZVhZID0gcmVxdWlyZSgnLi9ub2Rlcy9BbmltYXRlZFZhbHVlWFknKTtcbmNvbnN0IE5hdGl2ZUFuaW1hdGVkSGVscGVyID0gcmVxdWlyZSgnLi9OYXRpdmVBbmltYXRlZEhlbHBlcicpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCcuLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZScpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxuY29uc3Qge3Nob3VsZFVzZU5hdGl2ZURyaXZlcn0gPSByZXF1aXJlKCcuL05hdGl2ZUFuaW1hdGVkSGVscGVyJyk7XG5cbmltcG9ydCB0eXBlIHtQbGF0Zm9ybUNvbmZpZ30gZnJvbSAnLi9BbmltYXRlZFBsYXRmb3JtQ29uZmlnJztcblxuZXhwb3J0IHR5cGUgTWFwcGluZyA9XG4gIHwge1trZXk6IHN0cmluZ106IE1hcHBpbmcsIC4uLn1cbiAgfCBBbmltYXRlZFZhbHVlXG4gIHwgQW5pbWF0ZWRWYWx1ZVhZO1xuZXhwb3J0IHR5cGUgRXZlbnRDb25maWcgPSB7XG4gIGxpc3RlbmVyPzogP0Z1bmN0aW9uLFxuICB1c2VOYXRpdmVEcml2ZXI6IGJvb2xlYW4sXG4gIHBsYXRmb3JtQ29uZmlnPzogUGxhdGZvcm1Db25maWcsXG59O1xuXG5mdW5jdGlvbiBhdHRhY2hOYXRpdmVFdmVudChcbiAgdmlld1JlZjogYW55LFxuICBldmVudE5hbWU6IHN0cmluZyxcbiAgYXJnTWFwcGluZzogJFJlYWRPbmx5QXJyYXk8P01hcHBpbmc+LFxuICBwbGF0Zm9ybUNvbmZpZzogP1BsYXRmb3JtQ29uZmlnLFxuKToge2RldGFjaDogKCkgPT4gdm9pZH0ge1xuICAvLyBGaW5kIGFuaW1hdGVkIHZhbHVlcyBpbiBgYXJnTWFwcGluZ2AgYW5kIGNyZWF0ZSBhbiBhcnJheSByZXByZXNlbnRpbmcgdGhlaXJcbiAgLy8ga2V5IHBhdGggaW5zaWRlIHRoZSBgbmF0aXZlRXZlbnRgIG9iamVjdC4gRXguOiBbJ2NvbnRlbnRPZmZzZXQnLCAneCddLlxuICBjb25zdCBldmVudE1hcHBpbmdzID0gW107XG5cbiAgY29uc3QgdHJhdmVyc2UgPSAodmFsdWU6IG1peGVkLCBwYXRoOiBBcnJheTxzdHJpbmc+KSA9PiB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZSkge1xuICAgICAgdmFsdWUuX19tYWtlTmF0aXZlKHBsYXRmb3JtQ29uZmlnKTtcblxuICAgICAgZXZlbnRNYXBwaW5ncy5wdXNoKHtcbiAgICAgICAgbmF0aXZlRXZlbnRQYXRoOiBwYXRoLFxuICAgICAgICBhbmltYXRlZFZhbHVlVGFnOiB2YWx1ZS5fX2dldE5hdGl2ZVRhZygpLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGVkVmFsdWVYWSkge1xuICAgICAgdHJhdmVyc2UodmFsdWUueCwgcGF0aC5jb25jYXQoJ3gnKSk7XG4gICAgICB0cmF2ZXJzZSh2YWx1ZS55LCBwYXRoLmNvbmNhdCgneScpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHZhbHVlKSB7XG4gICAgICAgIHRyYXZlcnNlKHZhbHVlW2tleV0sIHBhdGguY29uY2F0KGtleSkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBpbnZhcmlhbnQoXG4gICAgYXJnTWFwcGluZ1swXSAmJiBhcmdNYXBwaW5nWzBdLm5hdGl2ZUV2ZW50LFxuICAgICdOYXRpdmUgZHJpdmVuIGV2ZW50cyBvbmx5IHN1cHBvcnQgYW5pbWF0ZWQgdmFsdWVzIGNvbnRhaW5lZCBpbnNpZGUgYG5hdGl2ZUV2ZW50YC4nLFxuICApO1xuXG4gIC8vIEFzc3VtZSB0aGF0IHRoZSBldmVudCBjb250YWluaW5nIGBuYXRpdmVFdmVudGAgaXMgYWx3YXlzIHRoZSBmaXJzdCBhcmd1bWVudC5cbiAgdHJhdmVyc2UoYXJnTWFwcGluZ1swXS5uYXRpdmVFdmVudCwgW10pO1xuXG4gIGNvbnN0IHZpZXdUYWcgPSBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZSh2aWV3UmVmKTtcbiAgaWYgKHZpZXdUYWcgIT0gbnVsbCkge1xuICAgIGV2ZW50TWFwcGluZ3MuZm9yRWFjaChtYXBwaW5nID0+IHtcbiAgICAgIE5hdGl2ZUFuaW1hdGVkSGVscGVyLkFQSS5hZGRBbmltYXRlZEV2ZW50VG9WaWV3KFxuICAgICAgICB2aWV3VGFnLFxuICAgICAgICBldmVudE5hbWUsXG4gICAgICAgIG1hcHBpbmcsXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBkZXRhY2goKSB7XG4gICAgICBpZiAodmlld1RhZyAhPSBudWxsKSB7XG4gICAgICAgIGV2ZW50TWFwcGluZ3MuZm9yRWFjaChtYXBwaW5nID0+IHtcbiAgICAgICAgICBOYXRpdmVBbmltYXRlZEhlbHBlci5BUEkucmVtb3ZlQW5pbWF0ZWRFdmVudEZyb21WaWV3KFxuICAgICAgICAgICAgdmlld1RhZyxcbiAgICAgICAgICAgIGV2ZW50TmFtZSxcbiAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdXG4gICAgICAgICAgICBtYXBwaW5nLmFuaW1hdGVkVmFsdWVUYWcsXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVNYXBwaW5nKGFyZ01hcHBpbmc6ICRSZWFkT25seUFycmF5PD9NYXBwaW5nPiwgYXJnczogYW55KSB7XG4gIGNvbnN0IHZhbGlkYXRlID0gKHJlY01hcHBpbmc6ID9NYXBwaW5nLCByZWNFdnQ6IGFueSwga2V5OiBzdHJpbmcpID0+IHtcbiAgICBpZiAocmVjTWFwcGluZyBpbnN0YW5jZW9mIEFuaW1hdGVkVmFsdWUpIHtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgdHlwZW9mIHJlY0V2dCA9PT0gJ251bWJlcicsXG4gICAgICAgICdCYWQgbWFwcGluZyBvZiBldmVudCBrZXkgJyArXG4gICAgICAgICAga2V5ICtcbiAgICAgICAgICAnLCBzaG91bGQgYmUgbnVtYmVyIGJ1dCBnb3QgJyArXG4gICAgICAgICAgdHlwZW9mIHJlY0V2dCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChyZWNNYXBwaW5nIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZVhZKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHR5cGVvZiByZWNFdnQueCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHJlY0V2dC55ID09PSAnbnVtYmVyJyxcbiAgICAgICAgJ0JhZCBtYXBwaW5nIG9mIGV2ZW50IGtleSAnICsga2V5ICsgJywgc2hvdWxkIGJlIFhZIGJ1dCBnb3QgJyArIHJlY0V2dCxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVjRXZ0ID09PSAnbnVtYmVyJykge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICByZWNNYXBwaW5nIGluc3RhbmNlb2YgQW5pbWF0ZWRWYWx1ZSxcbiAgICAgICAgJ0JhZCBtYXBwaW5nIG9mIHR5cGUgJyArXG4gICAgICAgICAgdHlwZW9mIHJlY01hcHBpbmcgK1xuICAgICAgICAgICcgZm9yIGtleSAnICtcbiAgICAgICAgICBrZXkgK1xuICAgICAgICAgICcsIGV2ZW50IHZhbHVlIG11c3QgbWFwIHRvIEFuaW1hdGVkVmFsdWUnLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgdHlwZW9mIHJlY01hcHBpbmcgPT09ICdvYmplY3QnLFxuICAgICAgJ0JhZCBtYXBwaW5nIG9mIHR5cGUgJyArIHR5cGVvZiByZWNNYXBwaW5nICsgJyBmb3Iga2V5ICcgKyBrZXksXG4gICAgKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0eXBlb2YgcmVjRXZ0ID09PSAnb2JqZWN0JyxcbiAgICAgICdCYWQgZXZlbnQgb2YgdHlwZSAnICsgdHlwZW9mIHJlY0V2dCArICcgZm9yIGtleSAnICsga2V5LFxuICAgICk7XG4gICAgZm9yIChjb25zdCBtYXBwaW5nS2V5IGluIHJlY01hcHBpbmcpIHtcbiAgICAgIHZhbGlkYXRlKHJlY01hcHBpbmdbbWFwcGluZ0tleV0sIHJlY0V2dFttYXBwaW5nS2V5XSwgbWFwcGluZ0tleSk7XG4gICAgfVxuICB9O1xuXG4gIGludmFyaWFudChcbiAgICBhcmdzLmxlbmd0aCA+PSBhcmdNYXBwaW5nLmxlbmd0aCxcbiAgICAnRXZlbnQgaGFzIGxlc3MgYXJndW1lbnRzIHRoYW4gbWFwcGluZycsXG4gICk7XG4gIGFyZ01hcHBpbmcuZm9yRWFjaCgobWFwcGluZywgaWR4KSA9PiB7XG4gICAgdmFsaWRhdGUobWFwcGluZywgYXJnc1tpZHhdLCAnYXJnJyArIGlkeCk7XG4gIH0pO1xufVxuXG5jbGFzcyBBbmltYXRlZEV2ZW50IHtcbiAgX2FyZ01hcHBpbmc6ICRSZWFkT25seUFycmF5PD9NYXBwaW5nPjtcbiAgX2xpc3RlbmVyczogQXJyYXk8RnVuY3Rpb24+ID0gW107XG4gIF9hdHRhY2hlZEV2ZW50OiA/e2RldGFjaDogKCkgPT4gdm9pZCwgLi4ufTtcbiAgX19pc05hdGl2ZTogYm9vbGVhbjtcbiAgX19wbGF0Zm9ybUNvbmZpZzogP1BsYXRmb3JtQ29uZmlnO1xuXG4gIGNvbnN0cnVjdG9yKGFyZ01hcHBpbmc6ICRSZWFkT25seUFycmF5PD9NYXBwaW5nPiwgY29uZmlnOiBFdmVudENvbmZpZykge1xuICAgIHRoaXMuX2FyZ01hcHBpbmcgPSBhcmdNYXBwaW5nO1xuXG4gICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0FuaW1hdGVkLmV2ZW50IG5vdyByZXF1aXJlcyBhIHNlY29uZCBhcmd1bWVudCBmb3Igb3B0aW9ucycpO1xuICAgICAgY29uZmlnID0ge3VzZU5hdGl2ZURyaXZlcjogZmFsc2V9O1xuICAgIH1cblxuICAgIGlmIChjb25maWcubGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX19hZGRMaXN0ZW5lcihjb25maWcubGlzdGVuZXIpO1xuICAgIH1cbiAgICB0aGlzLl9hdHRhY2hlZEV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLl9faXNOYXRpdmUgPSBzaG91bGRVc2VOYXRpdmVEcml2ZXIoY29uZmlnKTtcbiAgICB0aGlzLl9fcGxhdGZvcm1Db25maWcgPSBjb25maWcucGxhdGZvcm1Db25maWc7XG4gIH1cblxuICBfX2FkZExpc3RlbmVyKGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIHRoaXMuX2xpc3RlbmVycy5wdXNoKGNhbGxiYWNrKTtcbiAgfVxuXG4gIF9fcmVtb3ZlTGlzdGVuZXIoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzLmZpbHRlcihsaXN0ZW5lciA9PiBsaXN0ZW5lciAhPT0gY2FsbGJhY2spO1xuICB9XG5cbiAgX19hdHRhY2godmlld1JlZjogYW55LCBldmVudE5hbWU6IHN0cmluZykge1xuICAgIGludmFyaWFudChcbiAgICAgIHRoaXMuX19pc05hdGl2ZSxcbiAgICAgICdPbmx5IG5hdGl2ZSBkcml2ZW4gZXZlbnRzIG5lZWQgdG8gYmUgYXR0YWNoZWQuJyxcbiAgICApO1xuXG4gICAgdGhpcy5fYXR0YWNoZWRFdmVudCA9IGF0dGFjaE5hdGl2ZUV2ZW50KFxuICAgICAgdmlld1JlZixcbiAgICAgIGV2ZW50TmFtZSxcbiAgICAgIHRoaXMuX2FyZ01hcHBpbmcsXG4gICAgICB0aGlzLl9fcGxhdGZvcm1Db25maWcsXG4gICAgKTtcbiAgfVxuXG4gIF9fZGV0YWNoKHZpZXdUYWc6IGFueSwgZXZlbnROYW1lOiBzdHJpbmcpIHtcbiAgICBpbnZhcmlhbnQoXG4gICAgICB0aGlzLl9faXNOYXRpdmUsXG4gICAgICAnT25seSBuYXRpdmUgZHJpdmVuIGV2ZW50cyBuZWVkIHRvIGJlIGRldGFjaGVkLicsXG4gICAgKTtcblxuICAgIHRoaXMuX2F0dGFjaGVkRXZlbnQgJiYgdGhpcy5fYXR0YWNoZWRFdmVudC5kZXRhY2goKTtcbiAgfVxuXG4gIF9fZ2V0SGFuZGxlcigpOiBhbnkgfCAoKC4uLmFyZ3M6IGFueSkgPT4gdm9pZCkge1xuICAgIGlmICh0aGlzLl9faXNOYXRpdmUpIHtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIGxldCB2YWxpZGF0ZWRNYXBwaW5nID0gZmFsc2U7XG4gICAgICAgIHJldHVybiAoLi4uYXJnczogYW55KSA9PiB7XG4gICAgICAgICAgaWYgKCF2YWxpZGF0ZWRNYXBwaW5nKSB7XG4gICAgICAgICAgICB2YWxpZGF0ZU1hcHBpbmcodGhpcy5fYXJnTWFwcGluZywgYXJncyk7XG4gICAgICAgICAgICB2YWxpZGF0ZWRNYXBwaW5nID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fY2FsbExpc3RlbmVycyguLi5hcmdzKTtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsTGlzdGVuZXJzO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB2YWxpZGF0ZWRNYXBwaW5nID0gZmFsc2U7XG4gICAgcmV0dXJuICguLi5hcmdzOiBhbnkpID0+IHtcbiAgICAgIGlmIChfX0RFVl9fICYmICF2YWxpZGF0ZWRNYXBwaW5nKSB7XG4gICAgICAgIHZhbGlkYXRlTWFwcGluZyh0aGlzLl9hcmdNYXBwaW5nLCBhcmdzKTtcbiAgICAgICAgdmFsaWRhdGVkTWFwcGluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRyYXZlcnNlID0gKFxuICAgICAgICByZWNNYXBwaW5nOiA/KE1hcHBpbmcgfCBBbmltYXRlZFZhbHVlKSxcbiAgICAgICAgcmVjRXZ0OiBhbnksXG4gICAgICApID0+IHtcbiAgICAgICAgaWYgKHJlY01hcHBpbmcgaW5zdGFuY2VvZiBBbmltYXRlZFZhbHVlKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiByZWNFdnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZWNNYXBwaW5nLnNldFZhbHVlKHJlY0V2dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlY01hcHBpbmcgaW5zdGFuY2VvZiBBbmltYXRlZFZhbHVlWFkpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHJlY0V2dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIHRyYXZlcnNlKHJlY01hcHBpbmcueCwgcmVjRXZ0LngpO1xuICAgICAgICAgICAgdHJhdmVyc2UocmVjTWFwcGluZy55LCByZWNFdnQueSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWNNYXBwaW5nID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGZvciAoY29uc3QgbWFwcGluZ0tleSBpbiByZWNNYXBwaW5nKSB7XG4gICAgICAgICAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC4xMjAuMCkgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW5cbiAgICAgICAgICAgICAqIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC4xMjAgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yLFxuICAgICAgICAgICAgICogZGVsZXRlIHRoaXMgY29tbWVudCBhbmQgcnVuIEZsb3cuICovXG4gICAgICAgICAgICB0cmF2ZXJzZShyZWNNYXBwaW5nW21hcHBpbmdLZXldLCByZWNFdnRbbWFwcGluZ0tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMuX2FyZ01hcHBpbmcuZm9yRWFjaCgobWFwcGluZywgaWR4KSA9PiB7XG4gICAgICAgIHRyYXZlcnNlKG1hcHBpbmcsIGFyZ3NbaWR4XSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fY2FsbExpc3RlbmVycyguLi5hcmdzKTtcbiAgICB9O1xuICB9XG5cbiAgX2NhbGxMaXN0ZW5lcnMgPSAoLi4uYXJnczogYW55KSA9PiB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtBbmltYXRlZEV2ZW50LCBhdHRhY2hOYXRpdmVFdmVudH07XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUMsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBLElBQUFDLGdCQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBRSxhQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFFYixJQUFNRyxhQUFhLEdBQUdILE9BQU8seUJBQXlCO0FBQ3RELElBQU1JLGVBQWUsR0FBR0osT0FBTywyQkFBMkI7QUFDMUQsSUFBTUssb0JBQW9CLEdBQUdMLE9BQU8sMEJBQTBCO0FBQzlELElBQU1NLFdBQVcsR0FBR04sT0FBTyxpQ0FBaUM7QUFFNUQsSUFBTU8sU0FBUyxHQUFH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